# 健身房管理系统

## 系统编写流程

### 准备工作

- [x] 业务分工
- [ ] 需求分析，建立数据库表
- [ ] 统一各开发软件版本

### 前端

- [ ] **明确**controller层映射路径，传入参数，返回值类型
- [ ] **明确**所有前端页面名、使用前端框架文件路径
- [ ] 编写页面详细代码

### 后端

- [ ] **明确**所有service层接口
- [ ] **明确**所有dao层接口
- [ ] 编写dao层实现
- [ ] 编写service层实现
- [ ] 编写controller业务逻辑

==注意==：

1. 所有“明确”需要统一通知到所有人。
2. 每次完成小模块功能，及时更新



## 时间安排

| 时间      | 任务                                                         | 实际完成情况 |
| --------- | ------------------------------------------------------------ | ------------ |
| 2019.8.29 | 分工，建表，业务逻辑分析（具体想怎么实现某功能，从前端到后端，主要步骤罗列） |              |
| 2019.8.30 | 完成前端1、2步骤                                             |              |
| 2019.8.31 | 前端编写                                                     |              |
| 2019.9.1  | 前端编写                                                     |              |
| 2019.9.2  | 后端1、2、3步骤                                              |              |
| 2019.9.3  | 后端                                                         |              |
| 2019.9.4  | 后端                                                         |              |
| 2019.9.5  | 后端                                                         |              |
| 2019.9.6  | 整合                                                         |              |
|           |                                                              |              |
|           |                                                              |              |

==注意==：

收工时间最晚2019.9.8，最少**留一天整合**。10号提交。

具体时间结合编码速度微调。

重点放在后端。

## 信息记录

### 人员分工

| 人员   | 分工说明 |
| ------ | -------- |
| 黄真亮 | 人事管理 |
| 梁伟国 | 衣柜管理 |
| 颜志安 | 商品管理 |
| 曾胜哲 | 课程管理 |
| 夏宇星 | 会员管理 |
|        | 统计分析 |
|        | 系统功能 |

==注意：==共7个模块

### 软件版本

| 软件          | 版本 |
| ------------- | ---- |
| Mysql         |      |
| Tomcat        |      |
| mybatis       |      |
| springboot    |      |
| log           |      |
| vue           |      |
| jquery        |      |
| ~~Thymeleaf~~ |      |
| Java          |      |
| Dbcp2         |      |
| Redis         |      |
|               |      |



### 数据表信息

#### 部门表dept

| 键                                                 | 说明 |
| -------------------------------------------------- | ---- |
| dept_id int(2) primary key AUTO_INCREMENT not null |      |
| dept_name varchar(20) not null                     | 名字 |

#### 员工信息表emp

| 键                                                           | 说明     |
| ------------------------------------------------------------ | -------- |
| emp_id  int(4) primary key AUTO_INCREMENT not null           | id       |
| emp_name varchar(20) not null                                | 名字     |
| job_id int(2) not null foreign key(job_id) references job(job_id) | 职位     |
| emp_hiredate date not null                                   | 受雇日期 |
| emp_sal int(5) not null                                      | 月工资   |
| dept_id int(2)  not null  foreign key(dept_id) references dept(dept_id) | 所属部门 |
| emp_phone  varchar(13)                                       | 电话号码 |

```mysql
CREATE TABLE `emp` (
`emp_id` int(4) NOT NULL AUTO_INCREMENT,
`emp_name` varchar(20) NOT NULL,
`job_id` int(2) NOT NULL,
`emp_hiredate` date NOT NULL,
`emp_sal` int(5) NOT NULL,
`dept_id` int(2) NOT NULL,
`emp_phone` varchar(13) DEFAULT NULL,
PRIMARY KEY (`emp_id`),
KEY `job_id` (`job_id`),
KEY `dept_id` (`dept_id`),
CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`job_id`) REFERENCES `job` (`job_id`),
CONSTRAINT `emp_ibfk_2` FOREIGN KEY (`dept_id`) REFERENCES `dept` (`dept_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
```



#### 职位表job

| 键                                                | 说明 |
| ------------------------------------------------- | ---- |
| job_id int(2) primary key AUTO_INCREMENT not null | id   |
| job_name varchar(20) not null                     | 名字 |
| job_sal int(5) not null                           | 底薪 |

```mysql
CREATE TABLE `job` (
`job_id` int(2) NOT NULL AUTO_INCREMENT,
`job_name` varchar(20) NOT NULL,
`job_sal` int(5) NOT NULL,
PRIMARY KEY (`job_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
```



------
#### 商品表product

| 键                                                           | 说明                   |
| ------------------------------------------------------------ | ---------------------- |
| pro_id int(4) primary key AUTO_INCREMENT not null            | id                     |
| pro_name varchar(20) not null                                | 名字                   |
| pro_desc varchar(400)                                        | 描述                   |
| pro_price int(8)                                             | 商品价格               |
| ptype_id int(4) not null foreign key(ptype_id) references ptype(ptype_id) | 商品类型(与类型表关联) |
| pro_num int(10)                                              | 商品数量               |
| pro_status tinyint(1) not null                               | 商品状态               |

```mysql
DROP TABLE IF EXISTS `product`;
CREATE TABLE `product`  (
  `pro_id` int(4) NOT NULL AUTO_INCREMENT,
  `pro_name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `pro_desc` varchar(400) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `pro_price` int(8) NOT NULL,
  `ptype_id` int(4) NOT NULL,
  `pro_num` int(10) NOT NULL,
  `pro_status` tinyint(1) NOT NULL,
  PRIMARY KEY (`pro_id`) USING BTREE,
  INDEX `fkpro_id_1`(`ptype_id`) USING BTREE,
  CONSTRAINT `fkpro_id_1` FOREIGN KEY (`ptype_id`) REFERENCES `ptype` (`ptype_id`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;


```



#### 商品类型表ptype

| 键                                                  | 说明   |
| --------------------------------------------------- | ------ |
| ptype_id int(4) primary key AUTO_INCREMENT not null | 类型id |
| ptype_name varchar(20) not null                     | 名字   |

```mysql
DROP TABLE IF EXISTS `ptype`;
CREATE TABLE `ptype`  (
  `ptype_id` int(4) NOT NULL AUTO_INCREMENT,
  `ptype_name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  PRIMARY KEY (`ptype_id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;


```



#### 商品出售记录表records

| 键                                                           | 说明                   |
| ------------------------------------------------------------ | ---------------------- |
| records_id int(4) primary key AUTO_INCREMENT not null        | 类型id                 |
| records_time timestamp not null                              | 记录时间               |
| pro_id int(4) not null foreign key(pro_id) references product(pro_id) | 商品信息(与商品表关联) |
| mid int(4) not null foreign key(mid) references member       | 会员信息(与会员表关联) |

```

```



### 页面信息

| 页面           | 描述       |
| -------------- | ---------- |
| personnel.html | 人事管理页 |
|                |            |

### controller层Mapping信息

#### personnelController.java

| Mapping路径       | 返回值        | 参数           | 业务说明     |
| ----------------- | ------------- | -------------- | ------------ |
| `/addDept.do`     | String`"ok"   | `Dept dept`    | 添加部门     |
| `/addEmp.do`      | `String`"ok"  | `Emp emp`      | 添加员工     |
|                   |               |                |              |
| `/delEmpById.do`  | `String` "ok" | `int id`       | 删除员工     |
| `/delDeptById.do` | `String` "ok" | `int id`       | 删除部门     |
|                   |               |                |              |
| `/changeEmp.do`   | `String` "ok" | `Emp newemp`   | 修改员工信息 |
| `/changeDept.do`  | `String` "ok" | `Dept newdept` | 修改员工信息 |
|                   |               |                |              |
| `/getAllDept.do`  | `List<dept>`  | 无             | 获取部门信息 |
| `/getAllEmp.do`   | `List<emp>`   | 无             | 获取员工信息 |
| `/searchDept.do`  | `List<dept>`  | `String key`   | 搜索部门     |
| `/searchEmp.do`   | `List<Emp>`   | `String key`   | 搜索员工     |




